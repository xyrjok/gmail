<structured-content-container _ngcontent-ng-c4279774176="" class="model-response-text ng-star-inserted has-thoughts" _nghost-ng-c2092577156="" style="height: auto;"><div _ngcontent-ng-c2092577156="" class="container"><message-content _ngcontent-ng-c2092577156="" _nghost-ng-c1008791615="" id="message-content-id-r_44b7c07eb118b33b" class="ng-star-inserted"><div _ngcontent-ng-c1008791615="" inline-copy-host="" class="markdown markdown-main-panel tutor-markdown-rendering enable-updated-hr-color" id="model-response-message-contentr_44b7c07eb118b33b" aria-live="polite" aria-busy="false" dir="ltr" style="--animation-duration: 400ms; --fade-animation-function: linear;"><p data-path-to-node="0">它涵盖了项目介绍、功能特性、架构说明、部署步骤（后端 Worker + 数据库 D1 + 前端）以及使用说明。</p><hr data-path-to-node="2"><h1 data-path-to-node="3">Gmail Management System (Cloudflare Worker Edition)</h1><p data-path-to-node="4">这是一个基于 <b>Cloudflare Workers</b> 和 <b>D1 Database</b> 构建的轻量级 Gmail 管理系统。它允许用户通过统一的后台管理多个 Gmail 邮箱，支持邮件发送任务调度、循环发信，并提供极其灵活的“公开查询链接”功能，无需共享账号密码即可对外分享特定条件的邮件内容。</p><h2 data-path-to-node="5">✨ 主要功能</h2><h3 data-path-to-node="6">1. 多账号管理</h3><ul data-path-to-node="7"><li><p data-path-to-node="7,0,0"><b>支持多种模式</b>：</p><ul data-path-to-node="7,0,1"><li><p data-path-to-node="7,0,1,0,0"><b>API 模式</b>：通过 Google 官方 Gmail API (OAuth2) 连接，稳定且权限控制精细。</p></li><li><p data-path-to-node="7,0,1,1,0"><b>GAS 模式</b>：通过 Google Apps Script (GAS) 部署 Web App 作为代理，无需复杂的 GCP 配置。</p></li><li><p data-path-to-node="7,0,1,2,0"><b>自动/混合模式</b>：根据配置自动选择最佳连接方式。</p></li></ul></li><li><p data-path-to-node="7,1,0"><b>批量导入/导出</b>：支持制表符 (<code>Tab</code>) 分隔的 <code>.txt</code> 文件批量导入和导出账号数据，方便迁移。</p></li></ul><h3 data-path-to-node="8">2. 收件规则 &amp; 公开查询</h3><ul data-path-to-node="9"><li><p data-path-to-node="9,0,0"><b>安全分享</b>：创建“查询码”（Query Code），生成公开链接（如 <code>https://your-domain.com/CODE123</code>）。</p></li><li><p data-path-to-node="9,1,0"><b>精准过滤</b>：可针对特定发件人、收件人或正文关键词（支持多关键词模糊匹配）设置过滤规则。</p></li><li><p data-path-to-node="9,2,0"><b>内容脱敏</b>：公开链接仅显示经过处理的纯文本内容，去除 HTML 标签，保护隐私。</p></li><li><p data-path-to-node="9,3,0"><b>有效期控制</b>：可设置规则的有效天数，过期自动失效。</p></li><li><p data-path-to-node="9,4,0"><b>实时获取</b>：访问链接时实时从 Gmail 拉取最新邮件（非缓存），确保时效性。</p></li></ul><h3 data-path-to-node="10">3. 发件任务 &amp; 循环调度</h3><ul data-path-to-node="11"><li><p data-path-to-node="11,0,0"><b>定时发送</b>：支持设置未来的特定时间发送邮件。</p></li><li><p data-path-to-node="11,1,0"><b>循环任务</b>：支持设置“随机延迟”间隔（天/时/分/秒），实现自动化循环发送。</p></li><li><p data-path-to-node="11,2,0"><b>状态监控</b>：实时查看任务状态（等待中、成功、失败）及执行次数统计。</p></li></ul><h3 data-path-to-node="12">4. 现代化后台界面</h3><ul data-path-to-node="13"><li><p data-path-to-node="13,0,0">基于 Bootstrap 5 的响应式设计。</p></li><li><p data-path-to-node="13,1,0">支持移动端操作。</p></li><li><p data-path-to-node="13,2,0">包含邮件实时预览功能。</p></li></ul><hr data-path-to-node="14"><h2 data-path-to-node="15">🛠️ 架构说明</h2><ul data-path-to-node="16"><li><p data-path-to-node="16,0,0"><b>Frontend (前端)</b>: 纯静态 HTML/JS/CSS，通过 Fetch API 与后端通信。可托管在 Cloudflare Pages、GitHub Pages 或任何静态服务器上。</p></li><li><p data-path-to-node="16,1,0"><b>Backend (后端)</b>: Cloudflare Worker。处理 API 请求、身份验证、与 Gmail 接口交互、以及响应公开查询链接。</p></li><li><p data-path-to-node="16,2,0"><b>Database (数据库)</b>: Cloudflare D1 (SQL)。存储账号信息、收件规则、发件任务等数据。</p></li></ul><hr data-path-to-node="17"><h2 data-path-to-node="18">🚀 部署指南</h2><h3 data-path-to-node="19">第一步：准备工作</h3><ol start="1" data-path-to-node="20"><li><p data-path-to-node="20,0,0">拥有一个 <b>Cloudflare</b> 账号。</p></li><li><p data-path-to-node="20,1,0">安装并配置 <response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><link-block _nghost-ng-c931907453="" class="ng-star-inserted"><!----><!----><a _ngcontent-ng-c931907453="" target="_blank" rel="noopener" externallink="" _nghost-ng-c3057824812="" jslog="197247;track:generic_click,impression,attention;BardVeMetadataKey:[[&quot;r_44b7c07eb118b33b&quot;,&quot;c_9bbd939fb92948c9&quot;,null,&quot;rc_3195302bbfe327ad&quot;,null,null,&quot;zh&quot;,null,1,null,null,1,0]]" href="https://developers.cloudflare.com/workers/wrangler/install-and-update/" class="ng-star-inserted" data-hveid="0" decode-data-ved="1" data-ved="0CAAQ_4QMahgKEwikru7vxb-RAxUAAAAAHQAAAAAQ5wE">Wrangler CLI</a><!----></link-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element>。</p></li><li><p data-path-to-node="20,2,0">（可选）如果是 API 模式，需在 Google Cloud Console 创建项目并获取 OAuth2 凭据（Client ID, Secret, Refresh Token）。</p></li><li><p data-path-to-node="20,3,0">（可选）如果是 GAS 模式，需在目标 Google 账号的 Google Drive 中创建 Apps Script 并部署为 Web App。</p></li></ol><h3 data-path-to-node="21">第二步：配置 Cloudflare D1 数据库</h3><ol start="1" data-path-to-node="22"><li><p data-path-to-node="22,0,0"><b>创建数据库</b>：</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><code-block _nghost-ng-c3434968043="" class="ng-tns-c3434968043-158 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3434968043="" class="code-block ng-tns-c3434968043-158 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression,attention;BardVeMetadataKey:[[&quot;r_44b7c07eb118b33b&quot;,&quot;c_9bbd939fb92948c9&quot;,null,&quot;rc_3195302bbfe327ad&quot;,null,null,&quot;zh&quot;,null,1,null,null,1,0]]" data-hveid="0" decode-data-ved="1" data-ved="0CAAQhtANahgKEwikru7vxb-RAxUAAAAAHQAAAAAQ6AE" style="display: block;"><div _ngcontent-ng-c3434968043="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3434968043-158 ng-star-inserted" style=""><span _ngcontent-ng-c3434968043="" class="ng-tns-c3434968043-158">Bash</span><div _ngcontent-ng-c3434968043="" class="buttons ng-tns-c3434968043-158 ng-star-inserted"><button _ngcontent-ng-c3434968043="" aria-label="Copy code" mat-icon-button="" mattooltip="Copy code" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3434968043-158 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_44b7c07eb118b33b&quot;,&quot;c_9bbd939fb92948c9&quot;,null,&quot;rc_3195302bbfe327ad&quot;,null,null,&quot;zh&quot;,null,1,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3434968043="" role="img" fonticon="content_copy" class="mat-icon notranslate gds-icon-s google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3434968043="" class="formatted-code-block-internal-container ng-tns-c3434968043-158"><div _ngcontent-ng-c3434968043="" class="animated-opacity ng-tns-c3434968043-158"><pre _ngcontent-ng-c3434968043="" class="ng-tns-c3434968043-158"><code _ngcontent-ng-c3434968043="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3434968043-158">wrangler d1 create gmail-db
</code></pre><!----></div></div></div><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element><p data-path-to-node="22,0,2"><i>记下终端输出的 <code>database_id</code>。</i></p></li><li><p data-path-to-node="22,1,0"><b>初始化表结构</b>：
将项目中的 <code>schema.sql</code> 内容应用到数据库：</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><code-block _nghost-ng-c3434968043="" class="ng-tns-c3434968043-159 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3434968043="" class="code-block ng-tns-c3434968043-159 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression,attention;BardVeMetadataKey:[[&quot;r_44b7c07eb118b33b&quot;,&quot;c_9bbd939fb92948c9&quot;,null,&quot;rc_3195302bbfe327ad&quot;,null,null,&quot;zh&quot;,null,1,null,null,1,0]]" data-hveid="0" decode-data-ved="1" data-ved="0CAAQhtANahgKEwikru7vxb-RAxUAAAAAHQAAAAAQ6QE" style="display: block;"><div _ngcontent-ng-c3434968043="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3434968043-159 ng-star-inserted" style=""><span _ngcontent-ng-c3434968043="" class="ng-tns-c3434968043-159">Bash</span><div _ngcontent-ng-c3434968043="" class="buttons ng-tns-c3434968043-159 ng-star-inserted"><button _ngcontent-ng-c3434968043="" aria-label="Copy code" mat-icon-button="" mattooltip="Copy code" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3434968043-159 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_44b7c07eb118b33b&quot;,&quot;c_9bbd939fb92948c9&quot;,null,&quot;rc_3195302bbfe327ad&quot;,null,null,&quot;zh&quot;,null,1,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3434968043="" role="img" fonticon="content_copy" class="mat-icon notranslate gds-icon-s google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3434968043="" class="formatted-code-block-internal-container ng-tns-c3434968043-159"><div _ngcontent-ng-c3434968043="" class="animated-opacity ng-tns-c3434968043-159"><pre _ngcontent-ng-c3434968043="" class="ng-tns-c3434968043-159"><code _ngcontent-ng-c3434968043="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3434968043-159">wrangler d1 execute gmail-db --file=./schema.sql
</code></pre><!----></div></div></div><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element></li></ol><h3 data-path-to-node="23">第三步：部署后端 (Worker)</h3><ol start="1" data-path-to-node="24"><li><p data-path-to-node="24,0,0"><b>修改 <code>wrangler.toml</code></b> (如未提供，请自行创建)：</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><code-block _nghost-ng-c3434968043="" class="ng-tns-c3434968043-160 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3434968043="" class="code-block ng-tns-c3434968043-160 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression,attention;BardVeMetadataKey:[[&quot;r_44b7c07eb118b33b&quot;,&quot;c_9bbd939fb92948c9&quot;,null,&quot;rc_3195302bbfe327ad&quot;,null,null,&quot;zh&quot;,null,1,null,null,1,0]]" data-hveid="0" decode-data-ved="1" data-ved="0CAAQhtANahgKEwikru7vxb-RAxUAAAAAHQAAAAAQ6gE" style="display: block;"><div _ngcontent-ng-c3434968043="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3434968043-160 ng-star-inserted" style=""><span _ngcontent-ng-c3434968043="" class="ng-tns-c3434968043-160">Ini, TOML</span><div _ngcontent-ng-c3434968043="" class="buttons ng-tns-c3434968043-160 ng-star-inserted"><button _ngcontent-ng-c3434968043="" aria-label="Copy code" mat-icon-button="" mattooltip="Copy code" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3434968043-160 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_44b7c07eb118b33b&quot;,&quot;c_9bbd939fb92948c9&quot;,null,&quot;rc_3195302bbfe327ad&quot;,null,null,&quot;zh&quot;,null,1,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3434968043="" role="img" fonticon="content_copy" class="mat-icon notranslate gds-icon-s google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3434968043="" class="formatted-code-block-internal-container ng-tns-c3434968043-160"><div _ngcontent-ng-c3434968043="" class="animated-opacity ng-tns-c3434968043-160"><pre _ngcontent-ng-c3434968043="" class="ng-tns-c3434968043-160"><code _ngcontent-ng-c3434968043="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3434968043-160"><span class="hljs-attr">name</span> = <span class="hljs-string">"gmail-worker"</span>
<span class="hljs-attr">main</span> = <span class="hljs-string">"worker.js"</span>
<span class="hljs-attr">compatibility_date</span> = <span class="hljs-string">"2023-01-01"</span>

<span class="hljs-section">[[d1_databases]]</span>
<span class="hljs-attr">binding</span> = <span class="hljs-string">"DB"</span> <span class="hljs-comment"># 代码中固定使用 DB 变量名</span>
<span class="hljs-attr">database_name</span> = <span class="hljs-string">"gmail-db"</span>
<span class="hljs-attr">database_id</span> = <span class="hljs-string">"你的_DATABASE_ID_粘贴在这里"</span>

<span class="hljs-section">[vars]</span>
<span class="hljs-attr">ADMIN_USERNAME</span> = <span class="hljs-string">"admin"</span>      <span class="hljs-comment"># 设置后台登录用户名</span>
<span class="hljs-attr">ADMIN_PASSWORD</span> = <span class="hljs-string">"password"</span>   <span class="hljs-comment"># 设置后台登录密码</span>
</code></pre><!----></div></div></div><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element></li><li><p data-path-to-node="24,1,0"><b>部署 Worker</b>：</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><code-block _nghost-ng-c3434968043="" class="ng-tns-c3434968043-161 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3434968043="" class="code-block ng-tns-c3434968043-161 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression,attention;BardVeMetadataKey:[[&quot;r_44b7c07eb118b33b&quot;,&quot;c_9bbd939fb92948c9&quot;,null,&quot;rc_3195302bbfe327ad&quot;,null,null,&quot;zh&quot;,null,1,null,null,1,0]]" data-hveid="0" decode-data-ved="1" data-ved="0CAAQhtANahgKEwikru7vxb-RAxUAAAAAHQAAAAAQ6wE" style="display: block;"><div _ngcontent-ng-c3434968043="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3434968043-161 ng-star-inserted" style=""><span _ngcontent-ng-c3434968043="" class="ng-tns-c3434968043-161">Bash</span><div _ngcontent-ng-c3434968043="" class="buttons ng-tns-c3434968043-161 ng-star-inserted"><button _ngcontent-ng-c3434968043="" aria-label="Copy code" mat-icon-button="" mattooltip="Copy code" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3434968043-161 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_44b7c07eb118b33b&quot;,&quot;c_9bbd939fb92948c9&quot;,null,&quot;rc_3195302bbfe327ad&quot;,null,null,&quot;zh&quot;,null,1,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3434968043="" role="img" fonticon="content_copy" class="mat-icon notranslate gds-icon-s google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3434968043="" class="formatted-code-block-internal-container ng-tns-c3434968043-161"><div _ngcontent-ng-c3434968043="" class="animated-opacity ng-tns-c3434968043-161"><pre _ngcontent-ng-c3434968043="" class="ng-tns-c3434968043-161"><code _ngcontent-ng-c3434968043="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3434968043-161">wrangler deploy
</code></pre><!----></div></div></div><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element><p data-path-to-node="24,1,2"><i>部署成功后，你将获得一个 Worker 域名，例如 <code>https://gmail-worker.你的子域.workers.dev</code>。</i></p></li></ol><h3 data-path-to-node="25">第四步：部署前端</h3><ol start="1" data-path-to-node="26"><li><p data-path-to-node="26,0,0">打开 <code>admin/script.js</code> 文件。</p></li><li><p data-path-to-node="26,1,0">修改第一行的 <code>API_BASE</code> 常量，将其替换为你上一步获得的 Worker 域名：</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><code-block _nghost-ng-c3434968043="" class="ng-tns-c3434968043-162 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3434968043="" class="code-block ng-tns-c3434968043-162 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression,attention;BardVeMetadataKey:[[&quot;r_44b7c07eb118b33b&quot;,&quot;c_9bbd939fb92948c9&quot;,null,&quot;rc_3195302bbfe327ad&quot;,null,null,&quot;zh&quot;,null,1,null,null,1,0]]" data-hveid="0" decode-data-ved="1" data-ved="0CAAQhtANahgKEwikru7vxb-RAxUAAAAAHQAAAAAQ7AE" style="display: block;"><div _ngcontent-ng-c3434968043="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3434968043-162 ng-star-inserted" style=""><span _ngcontent-ng-c3434968043="" class="ng-tns-c3434968043-162">JavaScript</span><div _ngcontent-ng-c3434968043="" class="buttons ng-tns-c3434968043-162 ng-star-inserted"><button _ngcontent-ng-c3434968043="" aria-label="Copy code" mat-icon-button="" mattooltip="Copy code" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3434968043-162 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_44b7c07eb118b33b&quot;,&quot;c_9bbd939fb92948c9&quot;,null,&quot;rc_3195302bbfe327ad&quot;,null,null,&quot;zh&quot;,null,1,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3434968043="" role="img" fonticon="content_copy" class="mat-icon notranslate gds-icon-s google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3434968043="" class="formatted-code-block-internal-container ng-tns-c3434968043-162"><div _ngcontent-ng-c3434968043="" class="animated-opacity ng-tns-c3434968043-162"><pre _ngcontent-ng-c3434968043="" class="ng-tns-c3434968043-162"><code _ngcontent-ng-c3434968043="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3434968043-162"><span class="hljs-keyword">const</span> API_BASE = <span class="hljs-string">"https://gmail-worker.你的子域.workers.dev"</span>;
</code></pre><!----></div></div></div><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element></li><li><p data-path-to-node="26,2,0">将 <code>admin</code> 文件夹内的所有文件 (<code>index.html</code>, <code>script.js</code>, <code>style.css</code> 等) 上传到 <b>Cloudflare Pages</b> 或任何静态网页托管服务。</p></li></ol><hr data-path-to-node="27"><h2 data-path-to-node="28">📖 使用说明</h2><h3 data-path-to-node="29">1. 登录后台</h3><p data-path-to-node="30">访问你部署的前端页面 URL，输入在 <code>wrangler.toml</code> 中设置的 <code>ADMIN_USERNAME</code> 和 <code>ADMIN_PASSWORD</code>。</p><h3 data-path-to-node="31">2. 添加 Gmail 账号</h3><p data-path-to-node="32">你有两种方式添加账号：</p><h4 data-path-to-node="33">方式 A：批量导入 (推荐)</h4><p data-path-to-node="34">点击“批量导入”，按照提示格式粘贴文本或上传 <code>.txt</code> 文件。
<b>格式说明</b>（每行一个账号，字段间用 <b>制表符 Tab</b> 分隔）：</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><code-block _nghost-ng-c3434968043="" class="ng-tns-c3434968043-163 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3434968043="" class="code-block ng-tns-c3434968043-163 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression,attention;BardVeMetadataKey:[[&quot;r_44b7c07eb118b33b&quot;,&quot;c_9bbd939fb92948c9&quot;,null,&quot;rc_3195302bbfe327ad&quot;,null,null,&quot;zh&quot;,null,1,null,null,1,0]]" data-hveid="0" decode-data-ved="1" data-ved="0CAAQhtANahgKEwikru7vxb-RAxUAAAAAHQAAAAAQ7QE" style="display: block;"><div _ngcontent-ng-c3434968043="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3434968043-163 ng-star-inserted" style=""><span _ngcontent-ng-c3434968043="" class="ng-tns-c3434968043-163">Plaintext</span><div _ngcontent-ng-c3434968043="" class="buttons ng-tns-c3434968043-163 ng-star-inserted"><button _ngcontent-ng-c3434968043="" aria-label="Copy code" mat-icon-button="" mattooltip="Copy code" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3434968043-163 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_44b7c07eb118b33b&quot;,&quot;c_9bbd939fb92948c9&quot;,null,&quot;rc_3195302bbfe327ad&quot;,null,null,&quot;zh&quot;,null,1,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3434968043="" role="img" fonticon="content_copy" class="mat-icon notranslate gds-icon-s google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3434968043="" class="formatted-code-block-internal-container ng-tns-c3434968043-163"><div _ngcontent-ng-c3434968043="" class="animated-opacity ng-tns-c3434968043-163"><pre _ngcontent-ng-c3434968043="" class="ng-tns-c3434968043-163"><code _ngcontent-ng-c3434968043="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3434968043-163">邮箱名称    别名    API配置(ID,Secret,Token)    GAS_URL
</code></pre><!----></div></div></div><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element><ul data-path-to-node="36"><li><p data-path-to-node="36,0,0"><b>API配置</b>：内部用英文逗号分隔 <code>ClientID,ClientSecret,RefreshToken</code>。</p></li><li><p data-path-to-node="36,1,0"><b>留空</b>：如果某项没有（例如只有 GAS URL 没有 API 配置），请保留 Tab 占位（即连续两个 Tab）。</p></li></ul><p data-path-to-node="37"><b>示例</b>：</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><code-block _nghost-ng-c3434968043="" class="ng-tns-c3434968043-164 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3434968043="" class="code-block ng-tns-c3434968043-164 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression,attention;BardVeMetadataKey:[[&quot;r_44b7c07eb118b33b&quot;,&quot;c_9bbd939fb92948c9&quot;,null,&quot;rc_3195302bbfe327ad&quot;,null,null,&quot;zh&quot;,null,1,null,null,1,0]]" data-hveid="0" decode-data-ved="1" data-ved="0CAAQhtANahgKEwikru7vxb-RAxUAAAAAHQAAAAAQ7gE" style="display: block;"><div _ngcontent-ng-c3434968043="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3434968043-164 ng-star-inserted" style=""><span _ngcontent-ng-c3434968043="" class="ng-tns-c3434968043-164">Plaintext</span><div _ngcontent-ng-c3434968043="" class="buttons ng-tns-c3434968043-164 ng-star-inserted"><button _ngcontent-ng-c3434968043="" aria-label="Copy code" mat-icon-button="" mattooltip="Copy code" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3434968043-164 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_44b7c07eb118b33b&quot;,&quot;c_9bbd939fb92948c9&quot;,null,&quot;rc_3195302bbfe327ad&quot;,null,null,&quot;zh&quot;,null,1,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3434968043="" role="img" fonticon="content_copy" class="mat-icon notranslate gds-icon-s google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3434968043="" class="formatted-code-block-internal-container ng-tns-c3434968043-164"><div _ngcontent-ng-c3434968043="" class="animated-opacity ng-tns-c3434968043-164"><pre _ngcontent-ng-c3434968043="" class="ng-tns-c3434968043-164"><code _ngcontent-ng-c3434968043="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3434968043-164">office@gmail.com    办公邮箱    id123,sec456,tok789
home@gmail.com      家庭邮箱            https://script.google.com/macros/s/xxx/exec
</code></pre><!----></div></div></div><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element><h4 data-path-to-node="39">方式 B：手动添加</h4><p data-path-to-node="40">点击“添加邮箱”，逐项填写。</p><h3 data-path-to-node="41">3. 配置收件规则 (公开链接)</h3><ol start="1" data-path-to-node="42"><li><p data-path-to-node="42,0,0">进入“收件规则”标签页。</p></li><li><p data-path-to-node="42,1,0">点击“添加规则”。</p></li><li><p data-path-to-node="42,2,0"><b>邮箱名</b>：必须与“邮箱管理”中已添加的账号名称完全一致。</p></li><li><p data-path-to-node="42,3,0"><b>查询码</b>：自定义一串字符（如 <code>MYMAIL</code>），如果不填可点击随机生成。</p></li><li><p data-path-to-node="42,4,0"><b>匹配条件</b>：</p><ul data-path-to-node="42,4,1"><li><p data-path-to-node="42,4,1,0,0"><b>关键词</b>：支持多个关键词。例如正文匹配填入 <code>验证码|Code</code>，则只要邮件包含其中任意一个词即可被抓取。</p></li><li><p data-path-to-node="42,4,1,1,0">注意：系统会自动对邮件正文进行纯文本匹配（忽略 HTML 标签），确保能搜到连续的字符串。</p></li></ul></li><li><p data-path-to-node="42,5,0"><b>访问链接</b>：保存后，直接访问 <code>https://你的Worker域名/查询码</code> (例如 <code>https://gmail-worker.xxx.workers.dev/MYMAIL</code>) 即可查看邮件。</p></li></ol><h3 data-path-to-node="43">4. 发送邮件与任务</h3><ol start="1" data-path-to-node="44"><li><p data-path-to-node="44,0,0">进入“发件设置”标签页。</p></li><li><p data-path-to-node="44,1,0">选择发件邮箱，填写收件人、主题、正文。</p></li><li><p data-path-to-node="44,2,0"><b>立即发送</b>：点击直接发送。</p></li><li><p data-path-to-node="44,3,0"><b>添加任务</b>：</p><ul data-path-to-node="44,3,1"><li><p data-path-to-node="44,3,1,0,0"><b>定时</b>：设置起始日期。</p></li><li><p data-path-to-node="44,3,1,1,0"><b>循环</b>：开启“循环”开关，并设置随机延迟范围（如 天:0, 时:1, 分:30-60，代表每隔 1小时30分 到 1小时60分 之间随机循环一次）。</p></li></ul></li></ol><hr data-path-to-node="45"><h2 data-path-to-node="46">⚙️ Google 端配置教程</h2><h3 data-path-to-node="47">方式一：API 模式 (推荐，更稳定)</h3><ol start="1" data-path-to-node="48"><li><p data-path-to-node="48,0,0">在 Google Cloud Console 创建项目。</p></li><li><p data-path-to-node="48,1,0">启用 <b>Gmail API</b>。</p></li><li><p data-path-to-node="48,2,0">配置 OAuth 同意屏幕（添加测试用户）。</p></li><li><p data-path-to-node="48,3,0">创建 <b>OAuth 2.0 Client ID</b> (Web Application)。</p><ul data-path-to-node="48,3,1"><li><p data-path-to-node="48,3,1,0,0">Redirect URI 可以填 <code>https://developers.google.com/oauthplayground</code> 以便获取 Token。</p></li></ul></li><li><p data-path-to-node="48,4,0">使用 OAuth Playground 获取 <code>Refresh Token</code>。</p></li><li><p data-path-to-node="48,5,0">将 Client ID, Client Secret, Refresh Token 填入系统。</p></li></ol><h3 data-path-to-node="49">方式二：GAS 模式 (简单)</h3><ol start="1" data-path-to-node="50"><li><p data-path-to-node="50,0,0">创建一个新的 Google Apps Script。</p></li><li><p data-path-to-node="50,1,0">粘贴对应的 GAS 脚本代码（需支持 <code>doPost</code> 处理 <code>action=get/send</code>）。</p></li><li><p data-path-to-node="50,2,0"><b>部署为 Web App</b>：</p><ul data-path-to-node="50,2,1"><li><p data-path-to-node="50,2,1,0,0">Execute as: <b>Me</b> (你的账号)。</p></li><li><p data-path-to-node="50,2,1,1,0">Who has access: <b>Anyone</b> (任何人)。</p></li></ul></li><li><p data-path-to-node="50,3,0">获取部署后的 URL (以 <code>/exec</code> 结尾)，填入系统。</p></li></ol><hr data-path-to-node="51"><h2 data-path-to-node="52">⚠️ 免责声明</h2><p data-path-to-node="53">本项目仅供学习和个人使用。请勿用于发送垃圾邮件或进行非法活动。使用者需自行承担因使用本项目而产生的任何法律责任。请妥善保管你的 <code>ADMIN_PASSWORD</code> 和查询码，防止隐私泄露。</p></div><!----></message-content><!----></div></structured-content-container>
